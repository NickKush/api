API сайта sc2tv 
===============

## Введение

Это апи оригинального сайта sc2tv, а не фанстрима. Соответственно, все запросы
делаются на оригинальный сайт [sc2tv.ru](http://sc2tv.ru) 

Запросы передаются стандартным для POST запроса методом, то есть строкой вида
```name1=value1&name2=value2...```, ответы приходят в формате json.

## Регистрация приложения

Для регистрации приложения на сайте ск2тв пожалуйста обратитесь к администрации портала.

## Получение доступа

#### Ссылка перехода 
Используется схема OAuth, с небольшими изменениями. Сформируйте урл вида
```
http://sc2tv.ru/ajax/sc2tv_api/auth_app?app_id=<your_app_id>&key=<unique_key_in_your_app>
```

Ид вашего приложения вы получите после регистрации. На ключ ограничение только одно - он должен
быть уникальным в рамках вашего приложения.

#### Получение токена пользователя

Вызовите методом POST 
```
http://sc2tv.ru/ajax/sc2tv_api/get_token
```
передав
```
key=<unique_key_in_your_app>
```
ключ тот же что и в ссылке перехода.  
В ответе будет токен в формате
```js
{
    token: <string>token, // токен текущего пользователя в рамках приложения
}
```
В случае ошибки будет возвращен код ошибки в формате
```js
{
    error: <int>code, //код ошибки
}
```
Коды ошибок:

1. Пользователь еще не авторизовал приложение, либо отказал в авторизации
2. Для данного ключа уже был сгенерирован и возвращен токен
3. Ошибка сервера, пожалуйста повторите запрос.
