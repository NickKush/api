API доната
----------
- [**Информация о последних событиях**](#Информация-о-последних-событиях)
    - [`GET` `P` `/billing/donate/challenge` Челенджи](#Челенджи)
    - [`GET` `P` `/billing/donate/` Донат, антидонат, микродонат](#Донат-антидонат-микродонат)
    - [`GET` `P` `/billing/donate/subscribe` Подписки на мастер стримеров](#Подписки-на-мастер-стримеров)



Информация о последних событиях
-------------------------------

Пока система доната/челенджей/подписок на sc2tv, информация о событиях является лишь парсингом соответствующих сообщений чата о этих событиях и может работать с ошибками и задержкой. Каждый метод отдаёт данные за последние 5 минут.


####  Челенджи
##### [`GET` `P` `/billing/donate/challenge`](https://funstream.tv/billing/donate/challenge)
**запрос**
```js
{
    id: <int|null> // Идентификатор стримера
    name: <string|null> // Имя стримера
}
```
**ответ**
```js
[
    <obj> {
        date: <int>, // Временная метка события
        amount: <int>, // Сумма поддержки челенджа
        challenge: <int>, // Имя челенджа
        support: <int>, // Имя поддержавшего пользователя
        type: <string>, // Тип события [challengecreate|challengeaccept|challengedone|challengesupport]
    },
    ...
}
```
*Записывает следующие события: создание челенджа, принятие челенджа стримером, выполнение челенджа стримером, поддержка челенджа на нек-ю сумму*  
*Можно передавать любой из параметров. В случае ошибки или пустых параметров вернёт пустой массив.*


####  Донат, антидонат, микродонат
##### [`GET` `P` `/billing/donate/`](https://funstream.tv/billing/donate/)
**запрос**
```js
{
    id: <int|null> // Идентификатор стримера
    name: <string|null> // Имя стримера
}
```
**ответ**
```js
[
    <obj> {
        date: <int>, // Временная метка события
        support: <string>, // Имя пользователя сделавшего перевод
        streamer: <string>, // Имя стримера получателя
        amount: <int>, // Сумма перевода(отрицательное число для антидоната)
        msg: <string>, // Сообщение к переводу, если есть
        type: <string> // Тип события [donate|antidonate|fastdonate]
    },
    ...
}
```
*Можно передавать любой из параметров. В случае ошибки или пустых параметров вернёт пустой массив.*


####  Подписки на мастер стримеров
##### [`GET` `P` `/billing/donate/subscribe`](https://funstream.tv/billing/donate/subscribe)
**запрос**
```js
{
    id: <int|null> // Идентификатор стримера
    name: <string|null> // Имя стримера
}
```
**ответ**
```js
[
    <obj> {
        date: <int>, // Временная метка события
        subscriber: <string>, // Имя подписавшегося пользователя
        amount: <int>, //Сумма подписки(при изменении подписки полная сумма новой подписки)
        type: 'subscribe'
    },
    ...
}
```
*Можно передавать любой из параметров. В случае ошибки или пустых параметров вернёт пустой массив.*  
*Не добавляет информацию при понижении суммы подписки. При изменении в большую сторону не выдаёт разницу, даст полную стоимость новой подписки.*