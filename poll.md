API голосования
==========
- [`POST` `P` `/api/poll/info` Данные голосования](#Данные-голосования)
- [`POST` `A` `/api/poll/start` Начать голосование](#Начать-голосование)
- [`POST` `A` `/api/poll/vote` Проголосовать](#Проголосовать)



#### Данные голосования
##### [`POST` `P` `/api/poll/info`](http://funstream.tv/api/poll/info)
**запрос**
```ts
{
    channel: string; // Идентификатор канала чата
}
```
**ответ**
```ts
{
    channel: string; // Идентификатор канала чата
    description: string; // Описание голосования
    duration: number; // Длительность, в секундах
    start: unixtime; // Время старта
    end: unixtime; // Время окончания
    donate: boolean; // Флаг голосования с донатом
    userId: number; // Идентификатор пользователя, начавшего голосование
    userVote: number; // Номер варианта за который проголосовал текущий пользователь
    variants: [ // Варианты ответов
        {
            position: number; // Позиция в списке вариантов
            name: string; // Название
            votes: number; // Число бесплатных голосов за этот вариант
            donateVotes: number; // Число платных голосов за этот вариант
        },
        ...
    ]
}
```
*Не может быть использован в [/api/bulk](common.md#Пакетный-запрос) запросе.*
*Если нет активного голосования, то вернёт данные предыдущего, если оно когда-либо было.*
*Может вернуть ошибку если на этом канале не было создано ни одного голосования.*


#### Начать голосование
##### [`POST` `A` `/api/poll/start`](http://funstream.tv/api/poll/start)
**запрос**
```ts
{
    channel: string; // Идентификатор канала чата
    description: string; // Описание голосования
    duration: number; // Длительность, в секундах
    donate: boolean; // Флаг голосования с донатом
    variants: [ // Варианты ответов
        {
            position: number; // Позиция в списке вариантов
            name: string; // Название
        },
        ...
    ]
}
```
**ответ**
```ts
{
    // Объект из ответа /api/poll/info
}
```
[`/api/poll/info`](#Данные-голосования)
*Не может быть использован в [/api/bulk](common.md#Пакетный-запрос) запросе.*
*Если нет активного голосования, то вернёт данные предыдущего, если оно когда-либо было.*
*Вернёт ошибку если не переданы какие-то из перечисленных полей.*


#### Проголосовать
##### [`POST` `A` `/api/poll/vote`](http://funstream.tv/api/poll/vote)
**запрос**
```ts
{
    channel: string; // Идентификатор канала чата
    position: number; // Позиция варианта из списка вариантов ответов голосования
}
```
**ответ**
```ts
{}
```
*Не может быть использован в [/api/bulk](common.md#Пакетный-запрос) запросе.*
*Вернёт ошибку если у указанного канала нет активного голосования или нет соответствующего варианта ответа.*

