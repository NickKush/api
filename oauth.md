Работа с [OAuth](http://oauth.net/)
==================

Термины:
------------------
  - **сервер** - веб-сервер [Funstream.tv](http://funstream.tv/)
  - **приложение** - веб-сервер приложения, либо приложение в телефоне
  - **пользователь** - зарегистрированный пользователь на [Funstream.tv](http://funstream.tv/)
  - **браузер** - браузер пользователя

Последовательность действий:
------------------
1. Приложение запрашивает код используя ```/api/oauth/request```
2. Приложение передает код в браузер, предлагая пользователю 
    перейти по ссылке ```http://funstream.tv/oauth/<code>```
3. Пользователь переходит по ссылке (открывается в новом окне, `target="blank"`)
4. Пользователь подтверждает код для приложения, и закрывает окно
5. Пользователь жмет "продолжить" в приложении
6. Приложение получает токен используя ```/api/oauth/exchange```
7. Приложение вызывает api фанстрим.тв используя полученый токен

OAuth API:
------------------
  - [Запросить разрешение](#Запросить-разрешение)
  - [Получить токен](#Получить-токен)
  - [Проверка прав](#Проверка-прав)
  - [Предоставить права](#Предоставить-права)

#### Запросить разрешение: 
#####URL:[`/api/oauth/request`](http://funstream.tv/api/oauth/request)  
**запрос:**
```js
{
    text: <string> //"Имя приложения или любой другой текст для пользователя."
}
```
**ответ:**
```js
{
    code: <string> //"Код доступа OAuth."
}
```

#### Получить токен: 
#####URL:[`/api/oauth/exchange`](http://funstream.tv/api/oauth/exchange)  
**запрос:**
```js
{
    code: <string> //"Код доступа OAuth."
}
```
**ответ:**
```js
{
    token: <string> //"Токен доступа API."
}
```
*Вернет ошибку если код не найден, либо если код не подтвержден пользователем.*

#### Проверка прав: 
#####URL:[`/api/oauth/check`](http://funstream.tv/api/oauth/check)  
**запрос:**
```js
{
    code: <string> //"Код доступа OAuth"
}
```
**ответ:**
```js
{
    id: <int>, //"Идентификатор кода доступа."
    text: <string>, //"Текст переданный с кодом доступа."
}
```

#### Предоставить права: 
#####URL:[`/api/oauth/grant`](http://funstream.tv/api/oauth/grant)  
**запрос:**
```js
{
    code: <string> //"Код доступа OAuth"
}
```
Ответ пустой, вернет ошибку если код не существует, уже подтвержден или пользователь не авторизован.
